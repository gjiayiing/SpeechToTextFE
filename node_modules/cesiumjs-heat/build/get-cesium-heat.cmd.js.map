{"version":3,"file":"get-cesium-heat.cmd.js","mappings":"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","sources":["webpack://cesiumjs-heat/./node_modules/heatmap.js-fixed/build/heatmap.js","webpack://cesiumjs-heat/./node_modules/lodash.throttle/index.js","webpack://cesiumjs-heat/webpack/bootstrap","webpack://cesiumjs-heat/webpack/runtime/compat get default export","webpack://cesiumjs-heat/webpack/runtime/define property getters","webpack://cesiumjs-heat/webpack/runtime/global","webpack://cesiumjs-heat/webpack/runtime/hasOwnProperty shorthand","webpack://cesiumjs-heat/webpack/runtime/make namespace object","webpack://cesiumjs-heat/./src/lib/CesiumHeat.js"],"sourcesContent":["/*\n * heatmap.js v2.0.2 | JavaScript Heatmap Library\n *\n * Copyright 2008-2016 Patrick Wied <heatmapjs@patrick-wied.at> - All rights reserved.\n * Dual licensed under MIT and Beerware license \n *\n * :: 2016-02-04 21:25\n */\n;(function (name, context, factory) {\n\n  // Supports UMD. AMD, CommonJS/Node.js and browser context\n  if (typeof module !== \"undefined\" && module.exports) {\n    module.exports = factory();\n  } else if (typeof define === \"function\" && define.amd) {\n    define(factory);\n  } else {\n    context[name] = factory();\n  }\n\n})(\"h337\", this, function () {\n\n// Heatmap Config stores default values and will be merged with instance config\nvar HeatmapConfig = {\n  defaultRadius: 40,\n  defaultRenderer: 'canvas2d',\n  defaultGradient: { 0.25: \"rgb(0,0,255)\", 0.55: \"rgb(0,255,0)\", 0.85: \"yellow\", 1.0: \"rgb(255,0,0)\"},\n  defaultMaxOpacity: 1,\n  defaultMinOpacity: 0,\n  defaultBlur: .85,\n  defaultXField: 'x',\n  defaultYField: 'y',\n  defaultValueField: 'value', \n  plugins: {}\n};\nvar Store = (function StoreClosure() {\n\n  var Store = function Store(config) {\n    this._coordinator = {};\n    this._data = [];\n    this._radi = [];\n    this._min = 0;\n    this._max = 1;\n    this._xField = config['xField'] || config.defaultXField;\n    this._yField = config['yField'] || config.defaultYField;\n    this._valueField = config['valueField'] || config.defaultValueField;\n\n    if (config[\"radius\"]) {\n      this._cfgRadius = config[\"radius\"];\n    }\n  };\n\n  var defaultRadius = HeatmapConfig.defaultRadius;\n\n  Store.prototype = {\n    // when forceRender = false -> called from setData, omits renderall event\n    _organiseData: function(dataPoint, forceRender) {\n        var x = dataPoint[this._xField];\n        var y = dataPoint[this._yField];\n        var radi = this._radi;\n        var store = this._data;\n        var max = this._max;\n        var min = this._min;\n        var value = dataPoint[this._valueField] || 1;\n        var radius = dataPoint.radius || this._cfgRadius || defaultRadius;\n\n        if (!store[x]) {\n          store[x] = [];\n          radi[x] = [];\n        }\n\n        if (!store[x][y]) {\n          store[x][y] = value;\n          radi[x][y] = radius;\n        } else {\n          store[x][y] += value;\n        }\n\n        if (store[x][y] > max) {\n          if (!forceRender) {\n            this._max = store[x][y];\n          } else {\n            this.setDataMax(store[x][y]);\n          }\n          return false;\n        } else{\n          return { \n            x: x, \n            y: y,\n            value: value, \n            radius: radius,\n            min: min,\n            max: max \n          };\n        }\n    },\n    _unOrganizeData: function() {\n      var unorganizedData = [];\n      var data = this._data;\n      var radi = this._radi;\n\n      for (var x in data) {\n        for (var y in data[x]) {\n\n          unorganizedData.push({\n            x: x,\n            y: y,\n            radius: radi[x][y],\n            value: data[x][y]\n          });\n\n        }\n      }\n      return {\n        min: this._min,\n        max: this._max,\n        data: unorganizedData\n      };\n    },\n    _onExtremaChange: function() {\n      this._coordinator.emit('extremachange', {\n        min: this._min,\n        max: this._max\n      });\n    },\n    addData: function() {\n      if (arguments[0].length > 0) {\n        var dataArr = arguments[0];\n        var dataLen = dataArr.length;\n        while (dataLen--) {\n          this.addData.call(this, dataArr[dataLen]);\n        }\n      } else {\n        // add to store  \n        var organisedEntry = this._organiseData(arguments[0], true);\n        if (organisedEntry) {\n          this._coordinator.emit('renderpartial', {\n            min: this._min,\n            max: this._max,\n            data: [organisedEntry]\n          });\n        }\n      }\n      return this;\n    },\n    setData: function(data) {\n      var dataPoints = data.data;\n      var pointsLen = dataPoints.length;\n\n\n      // reset data arrays\n      this._data = [];\n      this._radi = [];\n\n      for(var i = 0; i < pointsLen; i++) {\n        this._organiseData(dataPoints[i], false);\n      }\n      this._max = data.max;\n      this._min = data.min || 0;\n      \n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    removeData: function() {\n      // TODO: implement\n    },\n    setDataMax: function(max) {\n      this._max = max;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setDataMin: function(min) {\n      this._min = min;\n      this._onExtremaChange();\n      this._coordinator.emit('renderall', this._getInternalData());\n      return this;\n    },\n    setCoordinator: function(coordinator) {\n      this._coordinator = coordinator;\n    },\n    _getInternalData: function() {\n      return { \n        max: this._max,\n        min: this._min, \n        data: this._data,\n        radi: this._radi \n      };\n    },\n    getData: function() {\n      return this._unOrganizeData();\n    }/*,\n\n      TODO: rethink.\n\n    getValueAt: function(point) {\n      var value;\n      var radius = 100;\n      var x = point.x;\n      var y = point.y;\n      var data = this._data;\n\n      if (data[x] && data[x][y]) {\n        return data[x][y];\n      } else {\n        var values = [];\n        // radial search for datapoints based on default radius\n        for(var distance = 1; distance < radius; distance++) {\n          var neighbors = distance * 2 +1;\n          var startX = x - distance;\n          var startY = y - distance;\n\n          for(var i = 0; i < neighbors; i++) {\n            for (var o = 0; o < neighbors; o++) {\n              if ((i == 0 || i == neighbors-1) || (o == 0 || o == neighbors-1)) {\n                if (data[startY+i] && data[startY+i][startX+o]) {\n                  values.push(data[startY+i][startX+o]);\n                }\n              } else {\n                continue;\n              } \n            }\n          }\n        }\n        if (values.length > 0) {\n          return Math.max.apply(Math, values);\n        }\n      }\n      return false;\n    }*/\n  };\n\n\n  return Store;\n})();\n\nvar Canvas2dRenderer = (function Canvas2dRendererClosure() {\n\n  var _getColorPalette = function(config) {\n    var gradientConfig = config.gradient || config.defaultGradient;\n    var paletteCanvas = document.createElement('canvas');\n    var paletteCtx = paletteCanvas.getContext('2d');\n\n    paletteCanvas.width = 256;\n    paletteCanvas.height = 1;\n\n    var gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n    for (var key in gradientConfig) {\n      gradient.addColorStop(key, gradientConfig[key]);\n    }\n\n    paletteCtx.fillStyle = gradient;\n    paletteCtx.fillRect(0, 0, 256, 1);\n\n    return paletteCtx.getImageData(0, 0, 256, 1).data;\n  };\n\n  var _getPointTemplate = function(radius, blurFactor) {\n    var tplCanvas = document.createElement('canvas');\n    var tplCtx = tplCanvas.getContext('2d');\n    var x = radius;\n    var y = radius;\n    tplCanvas.width = tplCanvas.height = radius*2;\n\n    if (blurFactor == 1) {\n      tplCtx.beginPath();\n      tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      tplCtx.fillStyle = 'rgba(0,0,0,1)';\n      tplCtx.fill();\n    } else {\n      var gradient = tplCtx.createRadialGradient(x, y, radius*blurFactor, x, y, radius);\n      gradient.addColorStop(0, 'rgba(0,0,0,1)');\n      gradient.addColorStop(1, 'rgba(0,0,0,0)');\n      tplCtx.fillStyle = gradient;\n      tplCtx.fillRect(0, 0, 2*radius, 2*radius);\n    }\n\n\n\n    return tplCanvas;\n  };\n\n  var _prepareData = function(data) {\n    var renderData = [];\n    var min = data.min;\n    var max = data.max;\n    var radi = data.radi;\n    var data = data.data;\n\n    var xValues = Object.keys(data);\n    var xValuesLen = xValues.length;\n\n    while(xValuesLen--) {\n      var xValue = xValues[xValuesLen];\n      var yValues = Object.keys(data[xValue]);\n      var yValuesLen = yValues.length;\n      while(yValuesLen--) {\n        var yValue = yValues[yValuesLen];\n        var value = data[xValue][yValue];\n        var radius = radi[xValue][yValue];\n        renderData.push({\n          x: xValue,\n          y: yValue,\n          value: value,\n          radius: radius\n        });\n      }\n    }\n\n    return {\n      min: min,\n      max: max,\n      data: renderData\n    };\n  };\n\n\n  function Canvas2dRenderer(config) {\n    var container = config.container;\n    var shadowCanvas = this.shadowCanvas = document.createElement('canvas');\n    var canvas = this.canvas = config.canvas || document.createElement('canvas');\n    var renderBoundaries = this._renderBoundaries = [10000, 10000, 0, 0];\n\n    var computed = getComputedStyle(config.container) || {};\n\n    canvas.className = 'heatmap-canvas';\n\n    this._width = canvas.width = shadowCanvas.width = config.width || +(computed.width.replace(/px/,''));\n    this._height = canvas.height = shadowCanvas.height = config.height || +(computed.height.replace(/px/,''));\n\n    this.shadowCtx = shadowCanvas.getContext('2d');\n    this.ctx = canvas.getContext('2d');\n\n    // @TODO:\n    // conditional wrapper\n\n    canvas.style.cssText = shadowCanvas.style.cssText = 'position:absolute;left:0;top:0;';\n\n    container.style.position = 'relative';\n    container.appendChild(canvas);\n\n    this._palette = _getColorPalette(config);\n    this._templates = {};\n\n    this._setStyles(config);\n  };\n\n  Canvas2dRenderer.prototype = {\n    renderPartial: function(data) {\n      if (data.data.length > 0) {\n        this._drawAlpha(data);\n        this._colorize();\n      }\n    },\n    renderAll: function(data) {\n      // reset render boundaries\n      this._clear();\n      if (data.data.length > 0) {\n        this._drawAlpha(_prepareData(data));\n        this._colorize();\n      }\n    },\n    _updateGradient: function(config) {\n      this._palette = _getColorPalette(config);\n    },\n    updateConfig: function(config) {\n      if (config['gradient']) {\n        this._updateGradient(config);\n      }\n      this._setStyles(config);\n    },\n    setDimensions: function(width, height) {\n      this._width = width;\n      this._height = height;\n      this.canvas.width = this.shadowCanvas.width = width;\n      this.canvas.height = this.shadowCanvas.height = height;\n    },\n    _clear: function() {\n      this.shadowCtx.clearRect(0, 0, this._width, this._height);\n      this.ctx.clearRect(0, 0, this._width, this._height);\n    },\n    _setStyles: function(config) {\n      this._blur = (config.blur == 0)?0:(config.blur || config.defaultBlur);\n\n      if (config.backgroundColor) {\n        this.canvas.style.backgroundColor = config.backgroundColor;\n      }\n\n      this._width = this.canvas.width = this.shadowCanvas.width = config.width || this._width;\n      this._height = this.canvas.height = this.shadowCanvas.height = config.height || this._height;\n\n\n      this._opacity = (config.opacity || 0) * 255;\n      this._maxOpacity = (config.maxOpacity || config.defaultMaxOpacity) * 255;\n      this._minOpacity = (config.minOpacity || config.defaultMinOpacity) * 255;\n      this._useGradientOpacity = !!config.useGradientOpacity;\n    },\n    _drawAlpha: function(data) {\n      var min = this._min = data.min;\n      var max = this._max = data.max;\n      var data = data.data || [];\n      var dataLen = data.length;\n      // on a point basis?\n      var blur = 1 - this._blur;\n\n      while(dataLen--) {\n\n        var point = data[dataLen];\n\n        var x = point.x;\n        var y = point.y;\n        var radius = point.radius;\n        // if value is bigger than max\n        // use max as value\n        var value = Math.min(point.value, max);\n        var rectX = x - radius;\n        var rectY = y - radius;\n        var shadowCtx = this.shadowCtx;\n\n\n\n\n        var tpl;\n        if (!this._templates[radius]) {\n          this._templates[radius] = tpl = _getPointTemplate(radius, blur);\n        } else {\n          tpl = this._templates[radius];\n        }\n        // value from minimum / value range\n        // => [0, 1]\n        var templateAlpha = (value-min)/(max-min);\n        // this fixes #176: small values are not visible because globalAlpha < .01 cannot be read from imageData\n        shadowCtx.globalAlpha = templateAlpha < .01 ? .01 : templateAlpha;\n\n        shadowCtx.drawImage(tpl, rectX, rectY);\n\n        // update renderBoundaries\n        if (rectX < this._renderBoundaries[0]) {\n            this._renderBoundaries[0] = rectX;\n          }\n          if (rectY < this._renderBoundaries[1]) {\n            this._renderBoundaries[1] = rectY;\n          }\n          if (rectX + 2*radius > this._renderBoundaries[2]) {\n            this._renderBoundaries[2] = rectX + 2*radius;\n          }\n          if (rectY + 2*radius > this._renderBoundaries[3]) {\n            this._renderBoundaries[3] = rectY + 2*radius;\n          }\n\n      }\n    },\n    _colorize: function() {\n      var x = this._renderBoundaries[0];\n      var y = this._renderBoundaries[1];\n      var width = this._renderBoundaries[2] - x;\n      var height = this._renderBoundaries[3] - y;\n      var maxWidth = this._width;\n      var maxHeight = this._height;\n      var opacity = this._opacity;\n      var maxOpacity = this._maxOpacity;\n      var minOpacity = this._minOpacity;\n      var useGradientOpacity = this._useGradientOpacity;\n\n      if (x < 0) {\n        x = 0;\n      }\n      if (y < 0) {\n        y = 0;\n      }\n      if (x + width > maxWidth) {\n        width = maxWidth - x;\n      }\n      if (y + height > maxHeight) {\n        height = maxHeight - y;\n      }\n\n      var img = this.shadowCtx.getImageData(x, y, width, height);\n      var imgData = img.data;\n      var len = imgData.length;\n      var palette = this._palette;\n\n\n      for (var i = 3; i < len; i+= 4) {\n        var alpha = imgData[i];\n        var offset = alpha * 4;\n\n\n        if (!offset) {\n          continue;\n        }\n\n        var finalAlpha;\n        if (opacity > 0) {\n          finalAlpha = opacity;\n        } else {\n          if (alpha < maxOpacity) {\n            if (alpha < minOpacity) {\n              finalAlpha = minOpacity;\n            } else {\n              finalAlpha = alpha;\n            }\n          } else {\n            finalAlpha = maxOpacity;\n          }\n        }\n\n        imgData[i-3] = palette[offset];\n        imgData[i-2] = palette[offset + 1];\n        imgData[i-1] = palette[offset + 2];\n        imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\n\n      }\n\n      this.ctx.putImageData(img, x, y);\n\n      this._renderBoundaries = [1000, 1000, 0, 0];\n\n    },\n    getValueAt: function(point) {\n      var value;\n      var shadowCtx = this.shadowCtx;\n      var img = shadowCtx.getImageData(point.x, point.y, 1, 1);\n      var data = img.data[3];\n      var max = this._max;\n      var min = this._min;\n\n      value = (Math.abs(max-min) * (data/255)) >> 0;\n\n      return value;\n    },\n    getDataURL: function() {\n      return this.canvas.toDataURL();\n    }\n  };\n\n\n  return Canvas2dRenderer;\n})();\n\n\nvar Renderer = (function RendererClosure() {\n\n  var rendererFn = false;\n\n  if (HeatmapConfig['defaultRenderer'] === 'canvas2d') {\n    rendererFn = Canvas2dRenderer;\n  }\n\n  return rendererFn;\n})();\n\n\nvar Util = {\n  merge: function() {\n    var merged = {};\n    var argsLen = arguments.length;\n    for (var i = 0; i < argsLen; i++) {\n      var obj = arguments[i]\n      for (var key in obj) {\n        merged[key] = obj[key];\n      }\n    }\n    return merged;\n  }\n};\n// Heatmap Constructor\nvar Heatmap = (function HeatmapClosure() {\n\n  var Coordinator = (function CoordinatorClosure() {\n\n    function Coordinator() {\n      this.cStore = {};\n    };\n\n    Coordinator.prototype = {\n      on: function(evtName, callback, scope) {\n        var cStore = this.cStore;\n\n        if (!cStore[evtName]) {\n          cStore[evtName] = [];\n        }\n        cStore[evtName].push((function(data) {\n            return callback.call(scope, data);\n        }));\n      },\n      emit: function(evtName, data) {\n        var cStore = this.cStore;\n        if (cStore[evtName]) {\n          var len = cStore[evtName].length;\n          for (var i=0; i<len; i++) {\n            var callback = cStore[evtName][i];\n            callback(data);\n          }\n        }\n      }\n    };\n\n    return Coordinator;\n  })();\n\n\n  var _connect = function(scope) {\n    var renderer = scope._renderer;\n    var coordinator = scope._coordinator;\n    var store = scope._store;\n\n    coordinator.on('renderpartial', renderer.renderPartial, renderer);\n    coordinator.on('renderall', renderer.renderAll, renderer);\n    coordinator.on('extremachange', function(data) {\n      scope._config.onExtremaChange &&\n      scope._config.onExtremaChange({\n        min: data.min,\n        max: data.max,\n        gradient: scope._config['gradient'] || scope._config['defaultGradient']\n      });\n    });\n    store.setCoordinator(coordinator);\n  };\n\n\n  function Heatmap() {\n    var config = this._config = Util.merge(HeatmapConfig, arguments[0] || {});\n    this._coordinator = new Coordinator();\n    if (config['plugin']) {\n      var pluginToLoad = config['plugin'];\n      if (!HeatmapConfig.plugins[pluginToLoad]) {\n        throw new Error('Plugin \\''+ pluginToLoad + '\\' not found. Maybe it was not registered.');\n      } else {\n        var plugin = HeatmapConfig.plugins[pluginToLoad];\n        // set plugin renderer and store\n        this._renderer = new plugin.renderer(config);\n        this._store = new plugin.store(config);\n      }\n    } else {\n      this._renderer = new Renderer(config);\n      this._store = new Store(config);\n    }\n    _connect(this);\n  };\n\n  // @TODO:\n  // add API documentation\n  Heatmap.prototype = {\n    addData: function() {\n      this._store.addData.apply(this._store, arguments);\n      return this;\n    },\n    removeData: function() {\n      this._store.removeData && this._store.removeData.apply(this._store, arguments);\n      return this;\n    },\n    setData: function() {\n      this._store.setData.apply(this._store, arguments);\n      return this;\n    },\n    setDataMax: function() {\n      this._store.setDataMax.apply(this._store, arguments);\n      return this;\n    },\n    setDataMin: function() {\n      this._store.setDataMin.apply(this._store, arguments);\n      return this;\n    },\n    configure: function(config) {\n      this._config = Util.merge(this._config, config);\n      this._renderer.updateConfig(this._config);\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    repaint: function() {\n      this._coordinator.emit('renderall', this._store._getInternalData());\n      return this;\n    },\n    getData: function() {\n      return this._store.getData();\n    },\n    getDataURL: function() {\n      return this._renderer.getDataURL();\n    },\n    getValueAt: function(point) {\n\n      if (this._store.getValueAt) {\n        return this._store.getValueAt(point);\n      } else  if (this._renderer.getValueAt) {\n        return this._renderer.getValueAt(point);\n      } else {\n        return null;\n      }\n    }\n  };\n\n  return Heatmap;\n\n})();\n\n\n// core\nvar heatmapFactory = {\n  create: function(config) {\n    return new Heatmap(config);\n  },\n  register: function(pluginKey, plugin) {\n    HeatmapConfig.plugins[pluginKey] = plugin;\n  }\n};\n\nreturn heatmapFactory;\n\n\n});","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import * as h337 from 'heatmap.js-fixed/build/heatmap'\nimport throttle from 'lodash.throttle'\n\nexport default (Cesium) => class CesiumHeat {\n  constructor(viewer, data = {\n    autoMaxMin: true,\n    data: [],\n  }, bbox = [-180, -90, 180, 90]\n    , heatmapConfig = {}, autoRadiusConfig = {\n      enabled: true,\n      throttle: 200, // ms\n      min: 6375000,\n      max: 10000000,\n      maxRadius: 20 * 2,\n      minRadius: 5 * 2,\n    }, canvasConfig = {\n      totalArea: 360 * 2 * 720 * 2,\n      autoResize: true,\n    }) {\n\n    if (typeof window == 'undefined') return\n\n    this.updateCesium = throttle(this._updateCesium, autoRadiusConfig.throttle || 200, { 'trailing': true })\n\n    this.viewer = viewer\n    this.bbox = bbox\n    this.autoRadiusConfig = autoRadiusConfig\n    this.max = undefined\n    this.min = undefined\n\n    // bbox计算基础信息\n    const [left, bottom, right, top] = bbox\n    let height = top - bottom, width = right - left\n    this.boxMeta = {\n      top, left, height, width\n    }\n\n    // 计算画布大小\n    if (canvasConfig.autoResize) {\n      if (!canvasConfig.totalArea) {\n        throw 'specify totalArea if auto resize'\n      }\n      // w*h = totalArea\n      // w:h = width/height\n      const h = Math.floor(Math.sqrt(height * canvasConfig.totalArea))\n      const w = Math.floor(h * width / height)\n      this.canvasConfig = {\n        ...canvasConfig,\n        width: w,\n        height: h,\n      }\n    } else {\n      if (!canvasConfig.width || !canvasConfig.height) {\n        throw 'specify width and height if not auto resize'\n      }\n      this.canvasConfig = canvasConfig\n    }\n\n    // 初始化heatmap\n    let config = { ...heatmapConfig }\n    if (!config.container) {\n      this.mountPoint = newDiv({\n        position: `absolute`,\n        top: 0,\n        left: 0,\n        'z-index': -100,\n        overflow: 'hidden',\n        width: 0,\n        height: 0,\n      }, document.body)\n\n      config.container = newDiv({\n        width: this.canvasConfig.width,\n        height: this.canvasConfig.height\n      }, this.mountPoint)\n    }\n    this.heatmapConfig = config\n    this.heatmap = h337.create(config)\n\n    // 设置热力图数据\n    let dataConfig\n    if (Array.isArray(data)) {\n      dataConfig = {\n        autoMaxMin: true,\n        data,\n      }\n    } else {\n      dataConfig = {\n        ...data\n      }\n    }\n    if (!dataConfig.autoMaxMin) {\n      if (!dataConfig.min || !dataConfig.max) {\n        throw 'need max and min when not auto'\n      }\n      this.min = dataConfig.min\n      this.max = dataConfig.max\n    }\n    let newData = dataConfig.data.map(x => {\n      this.updateMaxMin(x.value)\n      return this.convertData(x)\n    })\n    delete dataConfig.data\n\n    this.dataConfig = dataConfig\n    this.data = newData\n    let heatdata = {\n      max: this.max,\n      min: this.min,\n      data: newData,\n    }\n    this.heatmap.setData(heatdata)\n\n    // 更新到cesium\n    this.updateCesium(autoRadiusConfig.enabled)\n    this.cameraMoveEnd = () => this.updateCesium(true)\n    this.postRender = () => {\n      if (this.postRenderSkip) {\n        this.postRenderSkip = false\n        return\n      }\n      this.postRenderSkip = true\n      this.updateCesium(true)\n    }\n    if (autoRadiusConfig.enabled) {\n      this.viewer.camera.moveEnd.addEventListener(this.cameraMoveEnd)\n      // this.viewer.scene.postRender.addEventListener(this.postRender)\n    }\n\n  }\n\n  /**\n   * 增加一个或多个点\n   * @param {Object|[]} x \n   */\n  addData(x) {\n    if (Array.isArray(x)) {\n      this.data = this.data.concat(x.map(y => {\n        this.updateMaxMin(y.value)\n        return this.convertData(y)\n      }))\n    } else {\n      this.updateMaxMin(x.value)\n      this.data.push(this.convertData(x))\n    }\n    this.updateCesium(true)\n  }\n\n  /**\n   * 按当前的相机高度调整点的辐射（越高，越大）\n   */\n  updateHeatmap() {\n    let h = this.viewer.camera.getMagnitude()\n    const { min, max, minRadius, maxRadius } = this.autoRadiusConfig\n    let newRadius = parseInt(minRadius + (maxRadius - minRadius) * (h - min) / (max - min))\n\n    this.heatmap.setData({\n      max: this.max,\n      min: this.min,\n      data: this.data.map(({ x, y, value }) => {\n        return {\n          x, y, value, radius: newRadius,\n        }\n      })\n    })\n  }\n\n  /**\n   * 更新cesium显示\n   * @param {*} updateHeat \n   */\n  async _updateCesium(updateHeat) {\n    if (this.layer) {\n      this.viewer.scene.imageryLayers.remove(this.layer)\n    }\n    updateHeat && this.updateHeatmap()\n\n    let provider = await Cesium.SingleTileImageryProvider.fromUrl(\n      this.heatmap.getDataURL(),\n      {\n        rectangle: Cesium.Rectangle.fromDegrees(...this.bbox)\n      }\n    )\n    this.layer = this.viewer.scene.imageryLayers.addImageryProvider(provider)\n  }\n\n  /**\n   * 转换坐标\n   * @param {*} param0 \n   */\n  convertData({ x, y, value }) {\n    let [px, py] = this.gps2point([x, y])\n    return {\n      x: px,\n      y: py,\n      value: value,\n    }\n  }\n\n  /**\n   * 更新最大值最小值\n   * @param {number} value \n   */\n  updateMaxMin(value) {\n    if (this.max === undefined) {\n      this.max = value\n    } else {\n      this.max = Math.max(value, this.max)\n    }\n    if (this.min === undefined) {\n      this.min = value\n    } else {\n      this.min = Math.min(value, this.min)\n    }\n  }\n\n  gps2point(gps = []) {\n    let [x1, y1] = gps\n    let { top, left, height, width } = this.boxMeta\n    let canvasConfig = this.canvasConfig\n\n    let x = parseInt((x1 - left) / width * canvasConfig.width)\n    let y = parseInt((top - y1) / height * canvasConfig.height)\n    return [x, y]\n  }\n\n  /**\n   * 销毁\n   */\n  destory() {\n    if (this.autoRadiusConfig.enabled) {\n      this.viewer.camera.moveEnd.removeEventListener(this.cameraMoveEnd)\n      // this.viewer.scene.postRender.removeEventListener(this.postRender)\n    }\n    if (this.layer) {\n      this.viewer.scene.imageryLayers.remove(this.layer)\n    }\n    if (this.mountPoint) {\n      this.mountPoint.remove()\n    }\n  }\n}\n\n/**\n * 创建一个标签\n * @param {*} style \n * @param {*} parent \n */\nfunction newDiv(style, parent) {\n  let div = document.createElement('div')\n  parent && parent.append(div)\n  for (let k in style) {\n    if (typeof style[k] === 'number') {\n      div.style[k] = style[k] + 'px'\n      continue\n    }\n    div.style[k] = style[k]\n  }\n  return div\n}\n"],"names":["factory","rendererFn","HeatmapConfig","defaultRadius","defaultRenderer","defaultGradient","defaultMaxOpacity","defaultMinOpacity","defaultBlur","defaultXField","defaultYField","defaultValueField","plugins","Store","config","this","_coordinator","_data","_radi","_min","_max","_xField","_yField","_valueField","_cfgRadius","prototype","_organiseData","dataPoint","forceRender","x","y","radi","store","max","min","value","radius","setDataMax","_unOrganizeData","unorganizedData","data","push","_onExtremaChange","emit","addData","arguments","length","dataArr","dataLen","call","organisedEntry","setData","dataPoints","pointsLen","i","_getInternalData","removeData","setDataMin","setCoordinator","coordinator","getData","Canvas2dRenderer","_getColorPalette","gradientConfig","gradient","paletteCanvas","document","createElement","paletteCtx","getContext","width","height","createLinearGradient","key","addColorStop","fillStyle","fillRect","getImageData","_getPointTemplate","blurFactor","tplCanvas","tplCtx","beginPath","arc","Math","PI","fill","createRadialGradient","container","shadowCanvas","canvas","computed","_renderBoundaries","getComputedStyle","className","_width","replace","_height","shadowCtx","ctx","style","cssText","position","appendChild","_palette","_templates","_setStyles","renderPartial","_drawAlpha","_colorize","renderAll","_clear","renderData","xValues","Object","keys","xValuesLen","xValue","yValues","yValuesLen","yValue","_prepareData","_updateGradient","updateConfig","setDimensions","clearRect","_blur","blur","backgroundColor","_opacity","opacity","_maxOpacity","maxOpacity","_minOpacity","minOpacity","_useGradientOpacity","useGradientOpacity","tpl","point","rectX","rectY","templateAlpha","globalAlpha","drawImage","maxWidth","maxHeight","img","imgData","len","palette","finalAlpha","alpha","offset","putImageData","getValueAt","abs","getDataURL","toDataURL","Renderer","Util","merged","argsLen","obj","Heatmap","Coordinator","cStore","on","evtName","callback","scope","renderer","_config","pluginToLoad","Error","plugin","_renderer","_store","onExtremaChange","apply","configure","repaint","create","register","pluginKey","module","exports","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","freeSelf","self","root","Function","objectToString","toString","nativeMax","nativeMin","now","Date","isObject","type","toNumber","isObjectLike","isSymbol","other","valueOf","isBinary","test","slice","func","wait","options","leading","trailing","TypeError","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","maxing","invokeFunc","time","args","thisArg","undefined","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","leadingEdge","cancel","clearTimeout","flush","debounce","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","globalThis","e","window","prop","hasOwnProperty","r","Symbol","toStringTag","_regeneratorRuntime","t","iterator","c","asyncIterator","u","define","configurable","writable","wrap","Generator","Context","makeInvokeMethod","tryCatch","arg","h","l","f","s","GeneratorFunction","GeneratorFunctionPrototype","p","getPrototypeOf","v","values","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","reverse","pop","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","info","error","ownKeys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","_objectSpread","_toPropertyKey","getOwnPropertyDescriptors","defineProperties","_slicedToArray","arr","Array","isArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","from","arr2","_defineProperties","target","props","descriptor","input","hint","prim","toPrimitive","res","String","_toPrimitive","Cesium","CesiumHeat","viewer","_this","autoMaxMin","bbox","heatmapConfig","autoRadiusConfig","enabled","throttle","maxRadius","minRadius","canvasConfig","totalArea","autoResize","instance","Constructor","_classCallCheck","updateCesium","_updateCesium","_bbox","left","bottom","right","top","boxMeta","floor","sqrt","w","dataConfig","mountPoint","newDiv","overflow","body","heatmap","h337","newData","map","updateMaxMin","convertData","heatdata","cameraMoveEnd","postRender","postRenderSkip","camera","moveEnd","addEventListener","protoProps","fn","_updateCesium2","_this2","concat","getMagnitude","_this$autoRadiusConfi","newRadius","_ref","_callee","updateHeat","_Cesium$Rectangle","provider","_context","layer","scene","imageryLayers","remove","updateHeatmap","SingleTileImageryProvider","fromUrl","rectangle","Rectangle","fromDegrees","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","addImageryProvider","err","_x","_ref2","_this$gps2point2","gps2point","_gps","x1","y1","_this$boxMeta","removeEventListener","parent","div","k","append"],"sourceRoot":""}